# Cloud VM Configuration
# Edge proxy and SSO services for public internet access

# Node identification
node_role: edge_proxy
timezone: Europe/Vienna

# Docker configuration
docker_compose_version: '2.24.0'
docker_data_root: /opt/docker

# Stacks to deploy
stacks_to_deploy:
  - cloud

# Services running on this node
services:
  traefik:
    enabled: true
    port: 80
    port_https: 443
  authentik:
    enabled: true
    port: 9000
  uptime_kuma:
    enabled: true
    port: 3001

# Firewall configuration (UFW)
ufw_rules:
  - { port: 22, proto: tcp, rule: allow, comment: 'SSH' }
  - { port: 80, proto: tcp, rule: allow, comment: 'HTTP' }
  - { port: 443, proto: tcp, rule: allow, comment: 'HTTPS' }
  - { port: 51820, proto: udp, rule: allow, comment: 'Tailscale' }
  - { port: 41641, proto: tcp, rule: allow, comment: 'Tailscale' }

# Backup configuration
backup:
  enabled: true
  schedule: '0 3 * * *' # 3 AM daily
  retention:
    daily: 7
    weekly: 4
    monthly: 6
